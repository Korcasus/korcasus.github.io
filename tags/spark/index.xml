<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Spark on Read Write</title>
        <link>https://korcasus.github.io/tags/spark/</link>
        <description>Recent content in Spark on Read Write</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>ko</language>
        <lastBuildDate>Fri, 11 Aug 2023 00:09:54 +0900</lastBuildDate><atom:link href="https://korcasus.github.io/tags/spark/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Elasticsearch Spark</title>
        <link>https://korcasus.github.io/p/elasticsearch-spark/</link>
        <pubDate>Fri, 11 Aug 2023 00:09:54 +0900</pubDate>
        
        <guid>https://korcasus.github.io/p/elasticsearch-spark/</guid>
        <description>&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;ESê°€ ê²€ìƒ‰ì—”ì§„ì´ë‹¤ë³´ë‹ˆ, ì„¤ì •í•œ ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
í•˜ì§€ë§Œ ì¡°ê±´ìœ¼ë¡œ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ìƒ‰ì¸í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ê³ , ìƒ‰ì¸ì„ í•˜ê¸°ìœ„í•´ì„œëŠ” ë§ì€ ë¦¬ì†ŒìŠ¤ê°€ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.&lt;br&gt;
ì´ëŸ¬í•œ ì œì•½ì¡°ê±´ìœ¼ë¡œ ì¸í•´, ë§ì€ ì–‘ì˜ ë°ì´í„° ì†ì—ì„œ ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ì°¾ì•„ íš¨ìœ¨ì ìœ¼ë¡œ ì¶”ì¶œí•˜ê¸°ëŠ” ì–´ë µìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ë”°ë¼ì„œ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒí•´ì•¼í• í…ë°, ì´ëŸ¬í•œ ìƒí™©ì´ë¼ë©´ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° Hadoopì„ ì‚¬ìš©ì„ ê²€í† í•©ë‹ˆë‹¤.&lt;br&gt;
ë§Œì•½ Elasticsearchì— ì €ì¥í•  ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ì—­í• ì„ íŒ€ì› ë˜ëŠ” ë³¸ì¸ì´ë¼ë©´, ì ì ˆí•œ ë°©ë²•ìœ¼ë¡œ HDFSì— ê¸°ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
í•˜ì§€ë§Œ ë°ì´í„° ì „ì†¡ì— ëŒ€í•œ ì œì–´ê¶Œì´ ì—†ê³ , Elasticsearchë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?&lt;/p&gt;
&lt;p&gt;ë‹¹ì—°íˆ Elasticsearchì—ì„œ ë°ì´í„° ì¶”ì¶œì„ ê²€í† í•´ì•¼í•  ê²ƒì…ë‹ˆë‹¤.&lt;br&gt;
ì´ëŸ¬í•œ ìƒí™©ì— ì‚¬ìš©í•˜ê¸° ì í•©í•œ ë°©ë²•ì„ ì„¤ëª…í•˜ê³ ì í•©ë‹ˆë‹¤.&lt;br&gt;
Sparkì—ì„œ libraryë¥¼ ì‚¬ìš©í•´, Elasticsearch ë°ì´í„°ë¥¼ ETLí•˜ëŠ” ê³¼ì •ì„ Getting Started ì •ë„ì˜ ë‚´ìš©ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;objective&#34;&gt;Objective&lt;/h2&gt;
&lt;p&gt;ESì— ìƒ‰ì¸ë˜ì–´ìˆëŠ” íŠ¹ì • indexë¥¼ Hiveë¡œ ETLí•œë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;required&#34;&gt;Required&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Sparkì— ì¡°ê¸ˆì˜ ì§€ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/li&gt;
&lt;li&gt;Elasticsearchì— ì¡°ê¸ˆì˜ ì§€ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;environment&#34;&gt;Environment&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Scala : 2.12&lt;/li&gt;
&lt;li&gt;Spark : 3.x&lt;/li&gt;
&lt;li&gt;Java : 8&lt;/li&gt;
&lt;li&gt;ElasticSearch : 7.x&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;dependency&#34;&gt;Dependency&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;elasticsearch-hadoop&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;elasticsearch-spark-30_2.12&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;calcite-core&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ElasticSearch 8ë²„ì „ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ë©´, Release Noteë¥¼ ë³´ê³  ì ì ˆí•œ ë²„ì „ì„ ì°¾ëŠ”ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.&lt;br&gt;
elastic-* ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” 7.17.0 ë²„ì „ ì´ìƒì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.&lt;br&gt;
7.17.0 ë²„ì „ì—ì„œ ì¤‘ìš”í•œ íŒ¨ì¹˜ê°€ ì´ë£¨ì–´ì¡Œê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;calcite-coreëŠ” deserializeí• ë•Œ ì‚¬ìš©í–ˆë˜ê²ƒìœ¼ë¡œ ê¸°ì–µí•©ë‹ˆë‹¤.&lt;br&gt;
ì¶”ê°€í•˜ì§€ì•Šìœ¼ë©´, Dataframeì„ ìƒì„±í•˜ëŠ” ê³¼ì •ì— ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;getting-started&#34;&gt;Getting Started&lt;/h2&gt;
&lt;h3 id=&#34;connect&#34;&gt;Connect&lt;/h3&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/spark.html#spark-sql&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ê°€ì´ë“œ&lt;/a&gt;ëŒ€ë¡œ í•˜ë©´ Spark SQLì„ ì‚¬ìš©í•  ìˆ˜ìˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ Spark SQLì€ êµ¬ì¡°í™”ëœ ë°ì´í„°ì´ë¯€ë¡œ, ë™ì¼í•œ ë°ì´í„°êµ¬ì¡°ë¥¼ ê°€ì§€ì§€ì•Šì„ê²½ìš° ë¬¸ì œê°€ ìƒê¸¸ìˆ˜ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;êµ¬ë²„ì „ì€(Spark version &amp;lt; 3.x) ì„¤ëª…í•˜ì§„ ì•Šê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;Spark3ë²„ì „ë¶€í„°ëŠ” SparkSessionì„ ìƒì„±í•´ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;br&gt;
Sessionì„ ìƒì„±í•˜ë©´ì„œ, ì—°ê²°í•˜ê³ ì í•˜ëŠ” esì˜ ì •ë³´ë“¤ì„ ì…ë ¥í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/configuration.html#_essential_settings&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Configuration&lt;/a&gt;ì„ ì½ìœ¼ë©´ ìƒì„¸í•œ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ESì— ì—°ê²°í•˜ê¸°ìœ„í•´ì„œëŠ” ì•„ë˜ì˜ 2ê°œëŠ” í•„ìˆ˜ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;es.nodes&lt;/li&gt;
&lt;li&gt;es.port&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ì¸ì¦ì´ í•„ìš”í•˜ê±°ë‚˜, httpsì—°ê²°ì´ í•„ìš”í•˜ì§€ì•Šì„ ê²½ìš° ì•„ë˜ì™€ ê°™ì€ ì„¤ì •ì„ ì…ë ¥í•´ì¤ë‹ˆë‹¤.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;es.net.http.auth.user&lt;/li&gt;
&lt;li&gt;es.net.http.auth.pass&lt;/li&gt;
&lt;li&gt;es.net.ssl&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ì¸ì¦ê³¼ ê´€ë ¨ëœ ë‚´ìš©ì€ &lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/configuration.html#_secure_settings&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ë§í¬&lt;/a&gt;ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.
ì œí•œëœ í™˜ê²½ì¸ WANí™˜ê²½ì— êµ¬ì¶•ëœ ESë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ê²½ìš° ì¶”ê°€í•´ì£¼ì–´ì•¼í•˜ëŠ” íŒŒë¼ë¯¸í„°ê°€ ìˆìŠµë‹ˆë‹¤.
ì´ íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•  ê²½ìš°, &lt;code&gt;es.nodes&lt;/code&gt; ì— ëª…ì‹œëœ nodesë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ë¥¸ nodeëŠ” íƒìƒ‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;es.nodes.wan.only&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ìƒì„¸ ë‚´ìš©ì€ &lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/configuration.html#_input&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ë§í¬&lt;/a&gt;ì—ì„œ ë³´ì‹¤ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ìœ„ì™€ê°™ì€ ì„¤ì • ì •ë³´ë“¤ì„ ëª¨ë‘ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;builder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;master&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sparkConfiguration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getMaster&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;appName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sparkConfiguration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getAppName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;spark.es.nodes&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;es-nodes&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;spark.es.port&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;es-port&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;spark.es.net.http.auth.user&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;spark.es.net.http.auth.pass&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;password&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;spark.es.nodes.wan.only&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                           &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;spark.es.net.ssl&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ElasticSearch hadoopì€ Sparkê°€ ì ‘ê·¼í•´ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ 4ê°€ì§€ ì œê³µí•˜ê³ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Native RDD&lt;/li&gt;
&lt;li&gt;Spark Streaming&lt;/li&gt;
&lt;li&gt;Spark SQL&lt;/li&gt;
&lt;li&gt;Spark Structured Streaming&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ìœ„ 4ê°€ì§€ë¥¼ ì„±ê²©ì— ë”°ë¼ ë‚˜ëˆ„ì–´ ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Structured vs Unstructured&lt;/li&gt;
&lt;li&gt;Streaming vs Non-Streaming(Batch)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Streamingì„ ê³ ë ¤í•´ì•¼í•œë‹¤ë©´, Spark Streamingì´ë‚˜ Spark Structured Streamingì„ ê²€í† í•´ë³¼ìˆ˜ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ê·¸ê²Œì•„ë‹ˆë¼ë©´ Native RDDë‚˜ Spark SQLì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ESë°ì´í„°ë¥¼ Hiveì—ì„œ ì‚¬ìš©í•  ëª©ì ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” í”„ë¡œì íŠ¸ì´ë¯€ë¡œ, Structure í˜•íƒœë¥¼ ê°€ì§ˆìˆ˜ ìˆëŠ” Spark SQLë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
1.5 ì´ìƒë¶€í„°ëŠ” ì•„ë˜ì²˜ëŸ¼ Dataframeì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1.5 ì´ì „ ë²„ì „ì€ ê°€ì´ë“œ ë¬¸ì„œë¥¼ í†µí•´ í™•ì¸í•´ ì£¼ì„¸ìš”.)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;spark/index&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ì˜ˆì‹œëŠ” Javaë„ ìˆê¸´í•˜ì§€ë§Œ, Scalaë¡œ ìœ„ì£¼ë¡œ ì„¤ëª…í•˜ëŠ”ê²Œ ëŒ€ë‹¤ìˆ˜ì…ë‹ˆë‹¤.&lt;br&gt;
ìœ ì§€ ë³´ìˆ˜ë¥¼ ìœ„í•´ Java Projectë¡œ ì§„í–‰í•´ì•¼í–ˆê¸°ë•Œë¬¸ì—, ì‚¬ìš© ì˜ˆì‹œëŠ” ì•ìœ¼ë¡œ Javaë¡œ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Dataset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Row&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                              &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                              &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;template_data&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ìœ„ì™€ê°™ì€ ë°©ë²•ìœ¼ë¡œ DataFrame ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ë§Œì•½ì— Java DataFrame ê°ì²´ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤ë©´, ì•„ë˜ì™€ ê°™ì´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cfg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Maps&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;newHashMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// cfgëŠ” configurationì„ ì¶”ê°€í•˜ê¸°ìœ„í•œ ê°ì²´ì…ë‹ˆë‹¤.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cfg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es.read.metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Dataset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Row&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;JavaEsSparkSQL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;esDF&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;template_data&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cfg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;read-from-es&#34;&gt;Read from ES&lt;/h3&gt;
&lt;p&gt;ì§€ê¸ˆê¹Œì§€ ì„¤ëª…ë“œë¦° ë°©ë²•ì„ í†µí•´ DataFrameì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì´ì œëŠ” ë°ì´í„°ë¥¼ ì½ì–´ì™€ì„œ ì‚¬ìš©í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;br&gt;
ìš°ì„ ì€ DataFrameì— ì–´ë–¤ ë°ì´í„°ë“¤ì´ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;br&gt;
ì•„ë˜ì™€ ê°™ì´ printSchema()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´, DataFrameì´ ì–´ë–¤ êµ¬ì¡°ë¥¼ ê°–ì¶”ì—ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;printSchema&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;column1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;column2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;indexì— ì„¤ì •ëœ mappingì •ë³´ë¥¼ í† ëŒ€ë¡œ DataFrameì˜ Schemaë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.&lt;br&gt;
ì—¬ê¸°ê¹Œì§€ ì§ì ‘ ì§„í–‰í•´ë³´ì‹œë©´ ì•„ì‹œê² ì§€ë§Œ, document idì™€ ê°™ì€ metadataê°€ ì—†ìŠµë‹ˆë‹¤.
ì´ë¶€ë¶„ì€ ì¢€ ì˜ì•„í•˜ê¸´ í•˜ì§€ë§Œ, &lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/configuration.html#_metadata_when_reading_from_elasticsearch&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ì„¤ì •ê°’&lt;/a&gt;ì„ ì¶”ê°€í•˜ë©´ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Dataset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Row&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es.read.metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;template_data&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;printSchema&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;column1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;column2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_metadata&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;map&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;|--&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;valueContainsNull&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ë˜ í•œê°€ì§€ ì˜ì•„í•œ ì ì´ ìˆì„ ê²ë‹ˆë‹¤. array í•„ë“œëŠ” ì–´ë–»ê²Œ ë˜ëŠ”ê±°ì§€? ğŸ¤”&lt;br&gt;
mappingì—ëŠ” array íƒ€ì…ì„ ì§€ì •í•´ì¤„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;br&gt;
&lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/reference/7.17/array.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ê°€ì´ë“œ&lt;/a&gt; ë¬¸ì„œë¥¼ ì‚´í´ë´ë„ elementì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„° íƒ€ì…ì„ ëª…ì‹œí•˜ë„ë¡ ì•ˆë‚´í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
DataFrame Schemaê°€ ì˜ëª» ì§€ì •ë˜ì„œ, íŒŒì‹± ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ? ì§ˆë¬¸ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.&lt;br&gt;
ì´ ë¶€ë¶„ë„ ë§ˆì°¬ê°€ì§€ë¡œ ì„¤ì •ìœ¼ë¡œ í•´ê²°ê°€ëŠ¥í•˜ê²Œë” ë§Œë“¤ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì €ë„ ì´ ë¬¸ì œë¥¼ ê²ªì—ˆë‹¤ë³´ë‹ˆ, &lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/configuration.html#cfg-field-info&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ì„¤ì •&lt;/a&gt;ìœ¼ë¡œ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Dataset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Row&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es.read.metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;es.read.field.as.array.include&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;productMapping,sellerMapping&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;template_data&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ì–´ë–¤ í•„ë“œë¥¼ array ë¡œ íŒŒì‹±í•´ì•¼í•˜ëŠ”ì§€ ëª…ì‹œí•˜ì˜€ìŠµë‹ˆë‹¤.&lt;br&gt;
ì´ê²ƒê³¼ ë°˜ëŒ€ë¡œ arrayë¡œ íŒŒì‹±í•˜ë©´ ì•ˆë˜ëŠ” í•„ë“œë¥¼ ëª…ì‹œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
&lt;code&gt;es.read.field.as.array.exclude&lt;/code&gt; ê°’ì„ ì„¤ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.&lt;br&gt;
ESì— ì €ì¥ëœ ë°ì´í„°ë“¤ê³¼ mappingì˜ ë°ì´í„° íƒ€ì…ì´ ë¶ˆì¼ì¹˜ í•˜ì§€ì•ŠëŠ” ì´ìƒ, ì—¬ê¸°ê¹Œì§€ ì§„í–‰í–ˆë‹¤ë©´ ESë°ì´í„°ë¥¼ íŒŒì‹±í•˜ëŠ”ë° ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;br&gt;
DataFrameì„ ì§ì ‘ Handlingí•  ìˆ˜ë„ ìˆì§€ë§Œ, ì„ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  Viewë¥¼ ìƒì„±í•´ì£¼ë©´ ì•„ë˜ì²˜ëŸ¼ SQLì„ ì‚¬ìš©í•  ìˆ˜ë„ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;createTempView&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;tmp_front&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Dataset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Row&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filtered_df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;sql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;select _metadata, &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;,&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;columns&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; from tmp_front&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;customize-field&#34;&gt;Customize Field&lt;/h3&gt;
&lt;p&gt;ESì— ìˆëŠ” ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì•„ë‹ˆë¼, ë³€í™˜ì„ ê±°ì³ ì‚¬ìš©í•´ì•¼í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì˜ˆë¥¼ë“¤ë©´ Serialized Json Stringì´ í•„ë“œë¡œ ì¡´ì¬í•œë‹¤ë©´, Deserializeí•œ í›„ì— Mapìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ë¬¼ë¡  ì˜ˆì‹œëŠ” ì €ì˜ ì‚¬ë¡€ì…ë‹ˆë‹¤. ã…&lt;br&gt;
Processingì„ í•˜ê¸°ì— ì•ì„œ Sparkê°€ ì–´ë–»ê²Œ ì‹¤í–‰ë˜ëŠ”ì§€ ê°„ë‹¨íˆ ì´ì•¼ê¸°í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ìš°ë¦¬ê°€ ì‘ì„±í•œ í”„ë¡œê·¸ë¨ì€ Sparkì—ì„œ Driverë¼ê³  ë¶ˆë¦¬ë©°, ë‹¤ìˆ˜ì˜ ì›Œì»¤ ê´€ë¦¬ ë° ìš´ì˜í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§ê³¼ ê°™ì€ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.&lt;br&gt;
ë°ì´í„° ì¡°íšŒì™€ ë¶„ì‚°ì²˜ë¦¬ì˜ ê²½ìš°ì—ëŠ” Worker(Executor)ê°€ í• ë‹¹ë˜ì–´ ì²˜ë¦¬í•˜ê²Œë©ë‹ˆë‹¤. ë‹¤ìˆ˜ì˜ Workerê°€ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— í° ê·œëª¨ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë”ë¼ë„ ë¹ ë¥¸ì‹œê°„ì•ˆì— ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;br&gt;
ë¬¼ë¡  Workerì—ì„œ ì²˜ë¦¬í•œ ë°ì´í„°ë¥¼ Driverì—ì„œ ì²˜ë¦¬í•˜ê²Œ í• ìˆ˜ëŠ” ìˆì§€ë§Œ, ìƒë‹¹íˆ ëŠë ¤ì§ˆ ê²ƒì…ë‹ˆë‹¤.&lt;br&gt;
Spark SQLë¡œ ë§Œë“  DataFrameì€ Sparkì˜ Workerì— ë¶„ì‚°ë˜ì–´ ì €ì¥ë˜ì–´ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ë”°ë¼ì„œ í•„ë“œì˜ Processingì„ ìœ„í•´ì„œëŠ” ë‹¤ìˆ˜ì˜ Workerì—ì„œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ì•¼í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì´ë¥¼ ìœ„í•´ì„œëŠ” Serializable Interfaceë¡œ êµ¬í˜„í•´ì£¼ë©´ ë©ë‹ˆë‹¤.&lt;br&gt;
í•˜ì§€ë§Œ ì´ë¯¸ ë§Œë“¤ì–´ì§„ Classë¥¼ Serializableë¡œ ë³€ê²½í•˜ëŠ” ì‘ì—…ì€ ì‰½ì§€ì•Šì„ ê²ë‹ˆë‹¤.&lt;br&gt;
ëŒ€ì•ˆìœ¼ë¡œ static functionìœ¼ë¡œ ë§Œë“¤ì–´ì„œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜ˆì‹œë¡œ ë§ì”€ë“œë ¸ë˜ Deserializeí•œ í›„ ì»¬ëŸ¼ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê³¼ì •ì„ ë‚˜ì—´í•˜ë©´ ì•„ë˜ì™€ ìˆœì„œëŒ€ë¡œ ë˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;í•„ë“œë¥¼ ê°€ê³µí•  ìˆ˜ ìˆëŠ” UDF(User Defined Function)ì„ static functionìœ¼ë¡œ ë§Œë“ ë‹¤.&lt;/li&gt;
&lt;li&gt;SparkSessionì— UDF ë“±ë¡&lt;/li&gt;
&lt;li&gt;DataFrameì˜ ì»¬ëŸ¼ìœ¼ë¡œ ì¶”ê°€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ìœ„ì˜ 3ê°€ì§€ ê³¼ì •ì„ ì½”ë“œë¡œ ì‘ì„±í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UDF1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HashMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jsonStringToMap&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jsonStr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ObjectMapper&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjectMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;readValue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jsonStr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TypeReference&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HashMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nd&#34;&gt;@Override&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RepeatStatus&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;execute&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StepContribution&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;contribution&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChunkContext&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chunkContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;udf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;register&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;jsonStringToMap&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jsonStringToMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DataTypes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;createMapType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DataTypes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;StringType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DataTypes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;StringType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;createTempView&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;tmp_front&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;Dataset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Row&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filtered_df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sparkSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;sql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;select _metadata, &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;,&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;columns&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; from tmp_front&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;filtered_df&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filtered_df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;withColumn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;dataFieldMap&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;functions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;callUDF&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;jsonStringToMap&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filtered_df&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;col&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;dataFields&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ì´ë ‡ê²Œ UDF í•¨ìˆ˜ë¥¼ ê° Workerì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ ë¨ìœ¼ë¡œì„œ, ë¶„ì‚°ì €ì¥ëœ DataFrameì„ ë³‘ë ¬ë¡œ Processingí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;ì—¬ê¸°ê¹Œì§€ Sparkë¥¼ ì‚¬ìš©í•´ Elasticsearch ë°ì´í„°ë¥¼ Hiveì— ì—°ë™í•˜ëŠ” ê³¼ì •ê¹Œì§€ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
4ê°€ì§€ ë°©ì‹ì¤‘ ì €ì˜ ë‹ˆì¦ˆì— ë§ëŠ” Spark-SQLë§Œ ì„¤ëª…ë“œë ¸ì§€ë§Œ, ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ë‚˜ë¨¸ì§€ë„ ë¹„ìŠ·ë¹„ìŠ·í•©ë‹ˆë‹¤.
ìƒí™©ì— ë§ëŠ” ì ì ˆí•œ ë°©ì‹ì„ ì„ íƒí•´ì„œ ì§„í–‰í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;Guide ë¬¸ì„œë§Œ ë³´ê³  ì‹œì‘ì„ í—€ëŠ”ë°, ì‹¤ë ¥ì´ ë¶€ì¡±í•´ì„œ ê·¸ëŸ°ì§€ ì‚½ì§ˆ ì¢€ í–ˆì—ˆìŠµë‹ˆë‹¤. ğŸ« &lt;br&gt;
ì´ì™€ ë¹„ìŠ·í•œ ì¼ì„ í•˜ì…”ì•¼í•˜ëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ í•´ì„œ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê²¨ë´…ë‹ˆë‹¤.&lt;br&gt;
ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;reference&#34;&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Spark-SQL ì—°ë™ ê³µì‹ë¬¸ì„œ : &lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/spark.html#spark-sql&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/spark.html#spark-sql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Configuration ê³µì‹ë¬¸ì„œ : &lt;a class=&#34;link&#34; href=&#34;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/configuration.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.elastic.co/guide/en/elasticsearch/hadoop/7.17/configuration.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Dependency
&lt;ul&gt;
&lt;li&gt;Elasticsearch-spark-30 : &lt;a class=&#34;link&#34; href=&#34;https://mvnrepository.com/artifact/org.elasticsearch/elasticsearch-spark-30&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mvnrepository.com/artifact/org.elasticsearch/elasticsearch-spark-30&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Elasticsearch-hadoop : &lt;a class=&#34;link&#34; href=&#34;https://mvnrepository.com/artifact/org.elasticsearch/elasticsearch-hadoop&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mvnrepository.com/artifact/org.elasticsearch/elasticsearch-hadoop&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Spring Fat-jar for Spark</title>
        <link>https://korcasus.github.io/p/spring-fat-jar-for-spark/</link>
        <pubDate>Mon, 20 Feb 2023 23:16:51 +0900</pubDate>
        
        <guid>https://korcasus.github.io/p/spring-fat-jar-for-spark/</guid>
        <description>&lt;h2 id=&#34;how-to-build-fat-jar&#34;&gt;How to Build Fat Jar&lt;/h2&gt;
&lt;p&gt;Build Toolì„ ì–´ë–¤ ì¢…ë¥˜ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ì— ë”°ë¼ ë°©ë²•ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.&lt;br&gt;
Mavenì€ &lt;code&gt;maven-assembly-plugin&lt;/code&gt;&lt;br&gt;
Gradle &lt;code&gt;Shadow Plugin&lt;/code&gt; ì„ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.&lt;br&gt;
ëŒ€ë¶€ë¶„ì€ ìœ„ì˜ 2ê°œ Pluginì¤‘ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ë©´ í•´ê²°ë˜ì§€ë§Œ, Spring BootëŠ” êµ¬ë™ë°©ì‹ì´ ë‹¬ë¼ì„œ, ë³„ë„ì˜ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;boot-jar&#34;&gt;Boot-Jar&lt;/h2&gt;
&lt;p&gt;Springì—ì„œ ê³µì‹ì ìœ¼ë¡œ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì„¤ëª…ì— ë”°ë¥´ë©´ JavaëŠ” nested-jaríŒŒì¼ì„ loadí•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ì§€ì•ŠìŠµë‹ˆë‹¤. ì´ë•Œë¬¸ì— ì••ì¶• í’€ì§€ì•Šê³ , ì‹¤í–‰í•´ì•¼í•˜ëŠ” í™˜ê²½ì´ë¼ë©´ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì´ ë•Œë¬¸ì— Shaded Jar(Fat Jar)ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤. ëª¨ë“  JarsíŒŒì¼ë¡œë¶€í„° ëª¨ë“  Classë¥¼ ëª¨ì•„ì„œ Pacakageí•˜ì—¬ í•˜ë‚˜ì˜ JaríŒŒì¼ë¡œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.&lt;br&gt;
ì‹¤ì œë¡œ Applicationì— ì¡´ì¬í•˜ëŠ” libraryë¥¼ ë³´ê¸°ì— í˜ë“¤ì–´ì§€ê¸°ë•Œë¬¸ì—, Springì€ ë‹¤ë¥¸ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì–´ë–¤ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆëŠ”ì§€ê°€ ê¶ê¸ˆí•˜ë‹¤ë©´ ìƒì„¸í•œ ë‚´ìš©ì€ ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.&lt;/p&gt;
&lt;h3 id=&#34;configuration&#34;&gt;Configuration&lt;/h3&gt;
&lt;h4 id=&#34;1-module-ì¶”ê°€&#34;&gt;1. Module ì¶”ê°€&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;implementation &#39;org.springframework.boot:spring-boot-loader&#39;&lt;/code&gt;&lt;br&gt;
ìœ„ì˜ ëª¨ë“ˆì€ Spring boot ë¥¼ Excutable Jar ë˜ëŠ” Warë¡œ ë§Œë“¤ìˆ˜ ìˆê²Œ ë„ì™€ì¤ë‹ˆë‹¤.&lt;/p&gt;
&lt;h4 id=&#34;2-manifest-ë³€ê²½&#34;&gt;2. Manifest ë³€ê²½&lt;/h4&gt;
&lt;p&gt;JarLauncherë¥¼ í†µí•´ ì‹¤í–‰ë˜ì–´ì•¼í•˜ê¸° ë•Œë¬¸ì—, Manifest ë³€ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;br&gt;
&lt;code&gt;META-INF/MANIFEST.MF&lt;/code&gt; ì— ë‚´ìš©ì´ ì¡´ì¬í•˜ëŠ”ë°. Buildí•˜ë©° ê¸°ë¡ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ê³µì‹ë¬¸ì„œì—ëŠ” ì•„ë˜ì™€ê°™ì´ ê°€ì´ë“œ í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;Class:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;org&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;springframework&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;boot&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;loader&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;JarLauncher&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;Class:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;com&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mycompany&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;project&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;MyApplication&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ì €ì˜ ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;jar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;manifest&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;attributes&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Main-Class&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;org.springframework.boot.loader.JarLauncher&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;attributes&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Start-Class&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;com.mycompany.team.batch.SparkSpringBatchClient&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ë¬¸ì œì &#34;&gt;ë¬¸ì œì &lt;/h3&gt;
&lt;p&gt;&lt;code&gt;java -jar xxx.jar&lt;/code&gt; ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•  ê²½ìš°, ì •ìƒë™ì‘í•©ë‹ˆë‹¤.&lt;br&gt;
í•˜ì§€ë§Œ Sparkì—ì„œ ì‹¤í–‰í•  ê²½ìš°, ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì´ìœ ëŠ” Dependency version ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì¬ì§ì¤‘ì¸ íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ SparkëŠ” 2.4ë²„ì „ì„ ì‚¬ìš© ì¤‘ì¸ë°, ì—¬ê¸°ì— í¬í•¨ë˜ì–´ìˆëŠ” gson ë²„ì „ì´ Applicationì—ì„œ ì‚¬ìš©í•´ì•¼í•  ë²„ì „ë³´ë‹¤ ë‚®ì•˜ìŠµë‹ˆë‹¤.
ì´ë•Œë¬¸ì— êµ¬ë²„ì „ì˜ Gsonìœ¼ë¡œ ì‚¬ìš©ë˜ë©´ì„œ Applicationêµ¬ë™ ì‹¤íŒ¨ í•˜ì˜€ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ê°•ì œë¡œ ìµœì‹ ë²„ì „ì˜ Gsonì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;br&gt;
ì²«ë²ˆì§¸ë¡œëŠ” ì‚¬ìš©í•  Dependencyë²„ì „ì„ ëª…ì‹œí•˜ëŠ” ë°©ë²•ì´ì˜€ìŠµë‹ˆë‹¤.&lt;br&gt;
(ì°¸ê³ ë¡œ ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ì§€ì•Šì•„ë„ ë¹„êµì  ìµœì‹  gsonì„ ì‚¬ìš©í•©ë‹ˆë‹¤.)
í•˜ì§€ë§Œ sparkì— ë‚´ì¥ë˜ì–´ìˆëŠ” libraryë¥¼ ìš°ì„ ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°ë•Œë¬¸ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ë‘ë²ˆì§¸ ë°©ë²•ì€ &lt;a class=&#34;link&#34; href=&#34;https://spark.apache.org/docs/latest/configuration.html#runtime-environment&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Sparkê³µì‹ë¬¸ì„œ&lt;/a&gt;ì—ì„œ ì œê³µí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. (&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/31150656/classpath-resolution-between-spark-uber-jar-and-spark-submit-jars-when-similar&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ì°¸ê³ &lt;/a&gt;)&lt;br&gt;
&lt;code&gt;spark.driver.userClassPathFirst&lt;/code&gt;&lt;br&gt;
&lt;code&gt;spark.executor.userClassPathFirst&lt;/code&gt;&lt;br&gt;
ìœ„ì˜ 2ê°œ ë³€ìˆ˜ëŠ” ê¸°ë³¸ê°’ì´ Falseë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ë¬¸ì„œì— ë”°ë¥´ë©´, ì‚¬ìš©ìê°€ ì˜µì…˜ìœ¼ë¡œ ì¶”ê°€í•œ &lt;code&gt;--jars&lt;/code&gt; ë¥¼ ìš°ì„ ì‹œ ì‚¬ìš©í•œë‹¤ê³  ë˜ì–´ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì‹œí—˜ ê¸°ëŠ¥ì¸ ë¬¸ì œë„ ìˆê³ , ì¶”ê°€í•´ì•¼í•  jarì´ ì¦ê°€í•˜ë©´ ê´€ë¦¬í•  í¬ì¸íŠ¸ê°€ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ë„í•œëŒ€ë¡œ ë™ì‘í•˜ì§€ë„ ì•Šì•˜ê³ , ì˜ë„í–ˆë˜ ë°”ê°€ ì•„ë‹ˆë¼ ë”ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì´ë¥¼ í•´ê²°í•˜ë ¤ë©´ relocate(ì„ì˜ë¡œ ì´ë¦„ë³€ê²½?)ì„ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ë°, Shadow Pluginì—ì„œëŠ” ì§€ì›í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;shadow-plugin&#34;&gt;Shadow Plugin&lt;/h2&gt;
&lt;p&gt;í”„ë¡œì íŠ¸ ë‚´ì— ìˆëŠ” Dependency Classsì™€ Resourceë¥¼ í•˜ë‚˜ì˜ Jarë¡œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.&lt;br&gt;
ì´ë¡œ ì¸í•´ ì–»ì„ìˆ˜ ìˆëŠ” ì¥ì ì€ 2ê°€ì§€ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ì‹¤í–‰ê°€ëŠ¥í•œ Jarë°°í¬ë¥¼ ë§Œë“ ë‹¤.&lt;/li&gt;
&lt;li&gt;Libraryì— ìˆëŠ” ê³µí†µ Dependencyë¥¼ bundling, relocatingí•˜ì—¬ classpath conflictë¥¼ íšŒí”¼í•œë‹¤.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://wonyong-jang.github.io/spark/2021/07/08/Spark-override-dependency.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ì¥ì ì„ ì¢€ë” ì˜ í’€ì–´ì“´ê¸€&lt;/a&gt;ì„ ì°¸ê³ í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;h3 id=&#34;add-option-for-spring&#34;&gt;Add Option For Spring&lt;/h3&gt;
&lt;p&gt;Shadow Pluginìœ¼ë¡œ Spring Applicationì„ Buildí•˜ë ¤ë©´ ì¶”ê°€ ì˜µì…˜ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì•„ë˜ì˜ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;com.github.jengelman.gradle.plugins.shadow.transformers.*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;shadowJar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// Required for Spring
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;mergeServiceFiles&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;append&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;META-INF/spring.handlers&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;append&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;META-INF/spring.schemas&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;append&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;META-INF/spring.tooling&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;transform&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PropertiesFileTransformer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;paths&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;META-INF/spring.factories&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;mergeStrategy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;append&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ìƒì„¸í•œ ë‚´ìš©ì€ &lt;a class=&#34;link&#34; href=&#34;https://github.com/spring-projects/spring-boot/issues/1828#issuecomment-231104288&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Git Issue&lt;/a&gt;ë¥¼ ì½ì–´ë³´ë©´ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;h3 id=&#34;relocating-packages&#34;&gt;Relocating Packages&lt;/h3&gt;
&lt;p&gt;Classpathì— ë™ì¼í•œ Dependencyê°€ ì¡´ì¬í•˜ì—¬, ì˜ë„í•˜ê³ ìí•œ ë²„ì „ì„ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©ì¼ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. Hadoop, Sparkì—ì„œ ë¹ˆë²ˆíˆ ë°œìƒí•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì´ ì•„ì´ë””ì–´ëŠ” ê°„ë‹¨í•©ë‹ˆë‹¤. ì¶©ëŒë‚˜ëŠ” Dependencyë¥¼ Projectì—ì„œ ì°¾ì•„ë‚¸ë’¤, ì´ë¦„(ê²½ë¡œ)ì„ ë°”ê¿”ì¤ë‹ˆë‹¤.
ë‹¤ë¥¸ ì´ë¦„ì˜ Dependencyë¥¼ ì‚¬ìš©í•˜ê¸°ë•Œë¬¸ì— ë¬¸ì œê°€ ìƒê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;êµ¬í˜„ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Relocating a Package
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shadowJar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;n&#34;&gt;relocate&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;junit.framework&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;shadow.junit&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;juni.framework&lt;/code&gt;ë¥¼  &lt;code&gt;shadow.junit&lt;/code&gt; ìœ¼ë¡œ ë³€ê²½í•´ ì¤ë‹ˆë‹¤.&lt;br&gt;
í•„ìš”ì— ë§ê²Œ ì•„ë˜ì²˜ëŸ¼ ì ìš©í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;relocate&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;com.google.gson&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;shadow.google.gson&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;relocate&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;com.fasterxml.jackson&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;shadow.fasterxml.jackson&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Shadow Pluginì—ì„œ relocationì„ ì‚´í´ë³´ê³ ì‹¶ë‹¤ë©´ &lt;a class=&#34;link&#34; href=&#34;https://imperceptiblethoughts.com/shadow/configuration/relocation/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ë§í¬&lt;/a&gt;ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.&lt;/p&gt;
&lt;h3 id=&#34;classpath-ë³€ê²½&#34;&gt;Classpath ë³€ê²½&lt;/h3&gt;
&lt;p&gt;ì‚¬ì‹¤ ì—¬ê¸°ê¹Œì§€ ì§„í–‰í•˜ê³  ë‚˜ì„œ, ì˜ ì‹¤í–‰í•˜ëŠ”ê²ƒì„ ê¸°ëŒ€í–ˆìŠµë‹ˆë‹¤.&lt;br&gt;
í•˜ì§€ë§Œ &lt;code&gt;java -jar project-all.jar&lt;/code&gt; ë¡œ ì‹¤í–‰í•´ë³´ë©´, ì´ìƒí•¨ì„ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;br&gt;
&lt;img src=&#34;https://korcasus.github.io/p/spring-fat-jar-for-spark/capture.jpg&#34;
	width=&#34;2556&#34;
	height=&#34;1130&#34;
	srcset=&#34;https://korcasus.github.io/p/spring-fat-jar-for-spark/capture_hu6b272fe632b935ee9dc6b0754ccf08d6_754278_480x0_resize_q75_box.jpg 480w, https://korcasus.github.io/p/spring-fat-jar-for-spark/capture_hu6b272fe632b935ee9dc6b0754ccf08d6_754278_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ìº¡ì²˜&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;226&#34;
		data-flex-basis=&#34;542px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Springìì²´ëŠ” ì‹¤í–‰ë˜ì—ˆì§€ë§Œ, Main Applicationì´ ì‹¤í–‰ë˜ì§€ ì•Šì€ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì°¾ì•„ë³´ë‹ˆ, ì›ì¸ì„ ì•Œê¸° ì‰½ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ë‹¤í–‰íˆ try and error ê±°ì¹˜ë©° ì•Œì•„ëƒˆëŠ”ë°, ì•„ë˜ì˜ ë§í¬ì™€ ê´€ë ¨ìˆì—ˆìŠµë‹ˆë‹¤.
&lt;a class=&#34;link&#34; href=&#34;https://imperceptiblethoughts.com/shadow/configuration/dependencies/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://imperceptiblethoughts.com/shadow/configuration/dependencies/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ê¸°ë³¸ìœ¼ë¡œ runtimeClassPathë§Œ í¬í•¨ë˜ì„œ Buildë˜ì—ˆê³ , ì•„ë˜ì²˜ëŸ¼ compileClassPathë¥¼ í¬í•¨í•˜ë‹ˆ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;configurations&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;project&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;configurations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;compileClasspath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;project&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;configurations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;productionRuntimeClasspath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ë¬¸ì œí•´ê²°ì´ ìš°ì„ ì´ë¼, ì™œ compileClassPathë„ í¬í•¨í•´ì•¼ë§Œ ì •ìƒë™ì‘í•˜ëŠ”ì§€ëŠ” í™•ì¸í•´ë³´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Springì„ ì‚¬ìš©í• ë•Œ, ì–´ë–»ê²Œ Fat Jar(Shaded Jar)ì„ ë¹Œë“œí•  ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;br&gt;
Boot-Jarì€ ìŠ¤í”„ë§ì—ì„œ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì´ê³  ê°„ë‹¨í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, Dependency ì¶©ëŒí•˜ëŠ” ìƒí™©ì´ë¼ë©´ í•´ê²°í• ê¸° ì–´ë µë‹¤ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.&lt;br&gt;
ì´ëŸ°ê²½ìš°ëŠ” í•˜ë‘¡ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²½ìš°ì— í•´ë‹¹ë©ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;Shadow Pluginì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.&lt;br&gt;
í•˜ì§€ë§Œ ìŠ¤í”„ë§ì— ì ìš©í•˜ë ¤ë©´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€ë¡œ ì‘ì„±í•´ì£¼ì–´ì•¼ í•˜ì§€ë§Œ, Boot-Jarì—ì„œ ê²ªì—ˆë˜ ë¬¸ì œë¥¼ íšŒí”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;Sparkë‚˜ í•˜ë‘¡ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ê²½ìš°ë¼ë©´ Shadow Pluginì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.&lt;br&gt;
í•˜ì§€ë§Œ ì´ì™€ ê°™ì€ ë¬¸ì œë¥¼ ë¶€ë”ªíŒ ìƒí™©ì´ ì•„ë‹ˆë¼ë©´, ë³¸ì¸ì˜ ìƒí™©ì— ë§ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&#34;reference&#34;&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Spring Official Guide : &lt;a class=&#34;link&#34; href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/executable-jar.html#appendix.executable-jar.alternatives&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://docs.spring.io/spring-boot/docs/current/reference/html/executable-jar.html#appendix.executable-jar.alternatives&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ê³µì‹ë¬¸ì„œ ë²ˆì—­ Article : &lt;a class=&#34;link&#34; href=&#34;https://wordbe.tistory.com/entry/Spring-Boot-2-Executable-JAR-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%8B%A4%ED%96%89&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://wordbe.tistory.com/entry/Spring-Boot-2-Executable-JAR-ìŠ¤í”„ë§-ë¶€íŠ¸-ì‹¤í–‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Spring fat jar Git Issue for shadow plugin : &lt;a class=&#34;link&#34; href=&#34;https://github.com/spring-projects/spring-boot/issues/1828#issuecomment-231104288&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/spring-projects/spring-boot/issues/1828#issuecomment-231104288&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ì „ë°˜ì ì¸ ì´í•´ì— ë„ì›€ì„ ì£¼ì—ˆë˜ StackOverflow : &lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/51206959/classnotfound-when-submit-a-spring-boot-fat-jar-to-spark&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/51206959/classnotfound-when-submit-a-spring-boot-fat-jar-to-spark&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
